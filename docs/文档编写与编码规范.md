# 文档编写与编码规范（中文）

**最后更新**：2026-01-22

---

## 目标

- 所有中文文档默认使用 **UTF-8** 编码
- 尽量减少“不同终端/工具显示乱码”的概率
- 让新同学能快速定位到“文档 ↔ 代码实现”

---

## 编码约定

### 1) 文件编码

- `.md` / `.txt`：UTF-8（推荐无 BOM；如团队工具链强依赖 BOM，可统一改为 UTF-8 BOM）
- 仓库根目录已有 `.editorconfig`：建议编辑器启用 EditorConfig 支持

### 2) Windows 下写中文的推荐方式（PowerShell）

不要用默认重定向 `>` 写中文（可能变成 UTF-16 或出现乱码）。推荐：

```powershell
# 覆盖写入（UTF-8）
'中文内容' | Out-File -FilePath docs\\_tmp-utf8-check.md -Encoding utf8

# 追加写入（UTF-8）
'追加内容' | Out-File -FilePath docs\\_tmp-utf8-check.md -Encoding utf8 -Append
```

### 3) 快速验证（避免“看起来没问题但实际编码有问题”）

```powershell
python -c "open('docs/_tmp-utf8-check.md','r',encoding='utf-8').read(); print('OK')"
```

---

## 写作规范（与代码对齐）

### 1) 先给定位，再给解释

每份技术文档至少包含：

- 关键实现文件路径（例如：`src/auth.ts`、`middleware.ts`）
- 关键数据结构/字段名（例如：`Session.user.role`、`TicketUpdate.event`）
- 关键 API 路径（例如：`/api/tickets/updates/stream`）

### 2) 旧文档处理

当文档与实现不一致时：

- 当前实现为准（除非明确要改代码回到旧行为）
- 不再维护/不会阅读的文档应直接删除，避免误导
