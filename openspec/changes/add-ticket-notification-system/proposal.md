# 变更：添加工单通知系统

## 原因

当前系统缺乏完善的通知机制，主要问题：

1. **工单创建无邮件提醒** - 客户创建工单后，分配的员工无法及时收到通知
2. **未关闭工单无提醒** - 长时间未处理的工单容易被遗忘
3. **缺乏定时推送机制** - 没有自动化的工单跟踪和提醒系统

这些问题导致工单响应延迟，降低客户满意度。

## 变更内容

> [!TIP]
> **实现策略**：优先使用 Zammad 内置的 Triggers（触发器）和 Scheduler（调度器）功能，通过配置即可实现，无需开发。

### 阶段1：Zammad 邮件配置（P0）
- 配置 Zammad 邮件通道（SMTP）
- 确保邮件发送功能正常

### 阶段2：工单创建通知（P0）- Zammad Triggers
- 配置 Trigger：工单创建时发送邮件给相关 Agent
- 配置 Trigger：工单分配变更时通知新负责人

### 阶段3：未关闭工单定时推送（P1）- Zammad Scheduler
- 配置 Scheduler：24小时未更新工单提醒
- 配置 Scheduler：每日未关闭工单汇总报告

### 阶段4：前端通知增强（P3）- 可选开发
- 站内通知中心（可选）
- 通知偏好设置页面（可选）

## 影响

### 受影响的规范
- `notification-system` - 通知系统（需创建）

### 受影响的代码
- **无代码变更** - 通过 Zammad 管理后台配置实现

### 可选开发内容
- `src/components/notification-center.tsx` - 站内通知中心（可选）

### 破坏性变更
- **无**

## 优先级

**整体优先级**：🔴 P0（紧急）

邮件通知是客服系统核心功能，但使用 Zammad 内置功能后，实施成本大幅降低。

## 预期收益

1. **快速实现** - 配置即用，无需开发
2. **高可靠性** - Zammad 生产级邮件服务
3. **易于维护** - 管理员可自行调整规则
4. **减少依赖** - 无需额外 SMTP 配置
