# Ticket系统测试问题汇总

> 整理日期: 2025-12-23
> 原始文件: AI智能服务反馈—Ticket系统测试-工作表1.csv
> 有效问题数: 41条 (原CSV第2-43行)

---

## 📊 问题分类统计

| 分类 | 数量 | 说明 |
|------|------|------|
| **暂时删除** | 10 | Live Chat人工功能已移除 |
| **待测试** | 4 | 区域分配逻辑已更新 |
| **待修复-Bug** | 6 | 需要修复的Bug |
| **功能建议** | 18 | 新功能需求 |
| **待配置** | 2 | 配置调整 |
| **待处理** | 1 | 其他处理 |

---

## 🔴 暂时删除 (Live Chat相关 - 10条)

Live Chat人工对话功能已在代码中简化为**AI-only模式**，人工转接功能已移除。

相关代码变更:
- `src/app/customer/conversations/[id]/page.tsx` - "AI-only conversation mode (human agent transfer removed)"

| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 01 | 附件图片无法上传 | Edward |
| 02 | 员工发送信息对话框在左侧 | Archer |
| 03 | 客户转人工对话但技术无法回复 | Cody |
| 04 | 需要添加允许建立快捷话术的功能 | Archer |
| 05 | 退出Live聊天后重新进入会出现消息互串问题 | Edward |
| 06 | 切换人工再切换AI然后切换人工后无法进入人工对话 | Jason |
| 07 | 不小心点了close后无法恢复聊天重启对话后聊天记录丢失 | Dover |
| 08 | 客户发来对话技术支持点击认领对话 | Cody |
| 09 | 消息对话框的提示红点需要仅在有新消息时显示 | Luca |
| 10 | 发送的文件无法下载 | Kevin |

---

## 🟡 待测试 (区域分配相关 - 4条)

区域分配逻辑已于 **2025-12-23** 更新，所有8个区域现在都有独立的Zammad Group。

相关代码:
- `src/lib/constants/regions.ts` - REGION_GROUP_MAPPING (8个区域映射)
- `src/lib/utils/region-auth.ts` - 区域权限过滤逻辑
- `src/app/api/tickets/route.ts` - 工单创建区域分配
- `src/app/api/tickets/auto-assign/route.ts` - 工单自动分配

**Zammad Group映射 (已更新):**
| 区域 | Group ID | Zammad Group名称 |
|------|----------|-----------------|
| Africa | 1 | 非洲 Users |
| Europe Zone 1 | 2 | 欧洲 |
| Middle East | 3 | 中东 |
| Asia-Pacific | 4 | 亚太 |
| CIS | 5 | 独联体 |
| North America | 6 | 北美 |
| Latin America | 7 | 拉美 |
| Europe Zone 2 | 8 | 欧洲二区 |

| # | 问题描述 | 反馈人 | 测试要点 |
|---|----------|--------|----------|
| 11 | 非洲区提交工单技术支持无法显示对话框回复用户 | Cody | 测试非洲区工单创建和回复 |
| 12 | 点击查看工单历史时查看到其他区域或者客户提交的工单 | Cody | 测试Staff工单列表区域过滤 |
| 13 | support邮箱接收工单未分配技术人员美国技术支持可以直接预览但是无法回复操作 | Cody | 测试邮件工单分配后回复权限 |
| 14 | 客户发送support邮箱admin分配给美国客户技术支持技术支持无法在线回复 | Cody | 测试分配后Staff回复功能 |

---

## 🔧 待修复-Bug (6条)

| # | 问题描述 | 反馈人 | 优先级 | 代码审查结果 |
|---|----------|--------|--------|----------------|
| 15 | 点击选择未关闭工单跳转页面返回后未记录操作返回初始所有工单 | Cody | P1 | 待验证-可能需要URL参数持久化 |
| 16 | 客户上传的工单信息所属的角色为Staff | Edward | P1 | 待验证 |
| 17 | 客户提交工单上传的附件无法送到技术支持界面 | Luca | P0 | **已确认**: `create/page.tsx:89`有TODO未实现 |
| 18 | 工单状态未显示右上角待关闭状态需要显示 | Cody | P2 | 工单详情页已显示状态徽章 |
| 19 | Profile information的language选项无效 | Dover | P2 | 待验证 |
| 20 | SYSTEM CONFIG点击无效 | SHAMY | P2 | **已确认**: Configure按钮无功能实现 |

### 代码审查补充发现
- **附件下载路径错误** (`article-content.tsx:173`): 使用`/api/files/${att.id}`但Zammad附件需要专用下载API

---

## 🤖 待改进-AI (1条)

| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 21 | 对于机型需要有个模糊匹配(AT5属于MDT答案属于MDVR的) | Kevin |

---

## 💡 功能建议 (18条)

### 工单系统增强
| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 22 | 对于工单对话增加AI概要的功能总结内容解决状态 | Archer |
| 23 | 需要添加好评和差评以及好评原因或差评理由 | Jason |
| 24 | 需要添加客户重新激活工单的开关 | Jason |
| 25 | 增加回复模板 | Cody |
| 26 | 可以参考禅道让客户提交问题时引导客户填写设备信息 | Jason |
| 29 | 支持工单按优先级排序/筛选 | Jason |
| 30 | 增加时效管理超过规定时间还没处理完需要提醒 | Jason |
| 34 | 工单处理进度变更时自动发送邮件提醒客户 | Jason |
| 35 | admin账号下需要可以下载全部的TICKET | SHAMY |
| 39 | 工单REASSIGN统一入口 | SHAMY |

### UI/UX改进
| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 27 | 客户管理界面点击查看工单希望用小窗展示历史工单记录 | Archer |
| 36 | TICKET状态等基本信息放右边把中间留给对话 | SHAMY |
| 37 | 员工和客户的对接用不同底色一目了然 | SHAMY |

### 用户管理
| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 28 | 无法改头像希望1.0能完善此功能 | Dover |
| 33 | 未注册用户发了邮件到SUPPORT申请注册流程 | SHAMY |
| 38 | 看到新的工单需要可以识别该用户是否已注册用户 | SHAMY |

### FAQ系统
| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 40 | FAQ可以用EXCEL表格导入导出 | SHAMY |

---

## ⚙️ 待配置 (2条)

| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 31 | 邮件自动恢复签名需要修改需要修改Ticket系统URL增加各区域技术的联系方式Whatsapp | Cody |
| 32 | 客户收到的自动回复邮件模版需要修改工单入口签名要修改 | SHAMY |

---

## 📋 待处理 (1条)

| # | 问题描述 | 反馈人 |
|---|----------|--------|
| 41 | BUSINESS TYPE暂时没有这个功能先屏蔽 | SHAMY |

---

## 📝 下一步行动

1. **立即测试**: 区域分配相关的4个问题 (#11-14)
2. **优先修复**: 6个Bug (#15-20)
3. **评估规划**: 18个功能建议的优先级
4. **配置更新**: 2个邮件模板配置
